/* Application settings */
Ext.ModelMgr.registerType('AppSettings', {
    proxy: {
        type: 'localstorage',
        id  : 'appsettings'
    },
	
    fields: [
        {
            name: 'language',
            type: 'string',
            defaultValue: 'en'
        },
        {
            name: 'allNotifications',
            type: 'boolean',
            defaultValue: true
        },
		
		/* Category-specific notifications.
		 * There are few enough that we can get away
		 * with having them all here in a list.
		 */
        {
            name: 'foodNotifications',
            type: 'boolean',
            defaultValue: true
        },
        {
            name: 'vehicleNotifications',
            type: 'boolean',
            defaultValue: true
        },
        {
            name: 'cpsNotifications',
            type: 'boolean',
            defaultValue: true
        },
        {
            name: 'healthNotifications',
            type: 'boolean',
            defaultValue: true
        },
		
		/* Application state variables,
		 * used across sessions.
		 */
		{
            name: 'languageSelected',
            type: 'boolean',
            defaultValue: false /* Needed for app init. */
		}
		
    ],
	
	getNotificationSetting: function(notificationType) {
		if (this.get('allNotifications')) {
			return true;
		} else {
			return this.get(notificationType);
		}
	}
	
});
